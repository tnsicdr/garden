---
import type { Breadcrumb } from "../../shared/types/navigation";
import { isExternalPath } from "../../shared/utils/route-utils";

interface Props {
  crumbs: Breadcrumb[];
}

const { crumbs } = Astro.props;
---

<div>
  <ul class="breadcrumbs-list">
    {
      crumbs.map((crumb, index) => {
        if (!crumb.path) {
          return (
            <li>
              {/* Working around spacing weirdness in autoformatter */}
              <span>{crumb.label}</span>
            </li>
          );
        }
        const isExternal = isExternalPath(crumb.path);
        return (
          <li>
            <a
              href={crumb.path}
              rel={isExternal ? "noopener" : undefined}
              target={isExternal ? "_blank" : undefined}
            >
              {crumb.label}
            </a>
          </li>
        );
      })
    }
  </ul>
</div>

<style>
  .breadcrumbs-list {
    display: flex;
    flex-direction: row;
    margin-block-start: 0;
    margin-block-end: : 0;
    min-width: 0;

    & li {
      display: block;
      min-width: 0;
    }

    & li + li {
      margin-left: 0.25rem;
      
      &::before {
        content: "Â»";
        margin-right: 0.25rem;
      }
    }
  }
</style>
